{% load static %}
<div class="header">
 <h1>Todo List</h1>
 <div class="user-actions">
  <a href="{% url 'todo:todo_List' %}" class="nav-link">ğŸ“‹ ëª©ë¡</a>

  {% if user.is_authenticated %}
   <!-- ğŸ”“ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ (id ì¶”ê°€) -->
   <button id="logoutBtn" class="nav-link logout">ğŸ”“ ë¡œê·¸ì•„ì›ƒ</button>
  {% else %}
   <!-- ğŸ”’ ë¡œê·¸ì¸ì€ ì—¬ì „íˆ DRF ê¸°ë³¸ ë¡œê·¸ì¸ ë·° ì‚¬ìš© -->
   <a
    href="{% url 'rest_framework:login' %}?next={% url 'todo:todo_List' %}"
    class="nav-link login"
   >ğŸ”’ ë¡œê·¸ì¸</a>
  {% endif %}
 </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
 const logoutBtn = document.getElementById("logoutBtn");

 if (logoutBtn) {
  logoutBtn.addEventListener("click", async () => {
   try {
    await axiosInstance.post("/todo/api/custom-logout/");
    window.location.href = "{% url 'todo:todo_List' %}";
   } catch (err) {
    console.error("ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:", err);
    alert("ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
   }
  });
 }
});
</script>
