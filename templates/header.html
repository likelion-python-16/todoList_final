{% load static %}
<div class="header">
 <h1>Todo List</h1>
 <div class="user-actions">
  <a href="{% url 'todo_List' %}" class="nav-link">๐ ๋ชฉ๋ก</a>

  {% if user.is_authenticated %}
   <!-- ๐ ๋ก๊ทธ์์ ๋ฒํผ (id ์ถ๊ฐ) -->
   <button id="logoutBtn" class="nav-link logout">๐ ๋ก๊ทธ์์</button>
  {% else %}
   <!-- ๐ ๋ก๊ทธ์ธ์ ์ฌ์ํ DRF ๊ธฐ๋ณธ ๋ก๊ทธ์ธ ๋ทฐ ์ฌ์ฉ -->
   <a
    href="{% url 'rest_framework:login' %}?next={% url 'todo_List' %}"
    class="nav-link login"
   >๐ ๋ก๊ทธ์ธ</a>
  {% endif %}
 </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
 const logoutBtn = document.getElementById("logoutBtn");

 if (logoutBtn) {
  logoutBtn.addEventListener("click", async () => {
   try {
    await axiosInstance.post("/todo/api/custom-logout/");
    window.location.href = "{% url 'todo_List' %}";
   } catch (err) {
    console.error("๋ก๊ทธ์์ ์คํจ:", err);
    alert("๋ก๊ทธ์์ ์ค ์ค๋ฅ๊ฐ ๋ฐ์ํ์ต๋๋ค.");
   }
  });
 }
});
</script>


<!--
<button id="logoutBtn">๋ก๊ทธ์์</button> 

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("logoutBtn").addEventListener("click", () => {
    axiosInstance.get("/todo/api/custom-logout/")
      .then(() => {
        window.location.href = "{% url 'todo_List' %}";
      })
      .catch(err => {
        console.error("๋ก๊ทธ์์ ์คํจ:", err);
        alert("๋ก๊ทธ์์ ์ค ์ค๋ฅ๊ฐ ๋ฐ์ํ์ต๋๋ค.");
      });
  });
});
</script>

-->